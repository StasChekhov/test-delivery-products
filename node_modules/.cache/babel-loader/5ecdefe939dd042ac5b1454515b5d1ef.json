{"ast":null,"code":"import _objectSpread from\"/Users/staschekhov/Desktop/Probnoe/test-delivery-products/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/staschekhov/Desktop/Probnoe/test-delivery-products/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectDestructuringEmpty from\"/Users/staschekhov/Desktop/Probnoe/test-delivery-products/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import _slicedToArray from\"/Users/staschekhov/Desktop/Probnoe/test-delivery-products/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/staschekhov/Desktop/Probnoe/test-delivery-products/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import s from\"./Delivery.module.css\";import{nanoid}from\"@reduxjs/toolkit\";import{useDispatch}from\"react-redux\";import{useAddDeliveryMutation,useGetDeliveryQuery,useUpdateDeliveryMutation,useGetDeliveryByIdQuery}from\"redux/deliveryApi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function DeliveryForm(_ref){var formData=_ref.formData,isChange=_ref.isChange,onClose=_ref.onClose;//  const dispatch = useDispatch();\nvar _useState=useState(formData.name),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(formData.from),_useState4=_slicedToArray(_useState3,2),from=_useState4[0],setFrom=_useState4[1];var _useState5=useState(formData.to),_useState6=_slicedToArray(_useState5,2),to=_useState6[0],setTo=_useState6[1];var _useState7=useState(formData.radio),_useState8=_slicedToArray(_useState7,2),radio=_useState8[0],setRadio=_useState8[1];var _useState9=useState(formData.time),_useState10=_slicedToArray(_useState9,2),time=_useState10[0],setTime=_useState10[1];var _useState11=useState(formData.comment),_useState12=_slicedToArray(_useState11,2),comment=_useState12[0],setComment=_useState12[1];//  console.log(formData.id);\nvar _useGetDeliveryQuery=useGetDeliveryQuery(),_useGetDeliveryQuery$=_useGetDeliveryQuery.data,data=_useGetDeliveryQuery$===void 0?[]:_useGetDeliveryQuery$,error=_useGetDeliveryQuery.error,isLoading=_useGetDeliveryQuery.isLoading,refetch=_useGetDeliveryQuery.refetch;var _useAddDeliveryMutati=useAddDeliveryMutation(data),_useAddDeliveryMutati2=_slicedToArray(_useAddDeliveryMutati,2),addContact=_useAddDeliveryMutati2[0],result=_useAddDeliveryMutati2[1];var _useGetDeliveryByIdQu=useGetDeliveryByIdQuery(formData.id);_objectDestructuringEmpty(_useGetDeliveryByIdQu);var _useUpdateDeliveryMut=useUpdateDeliveryMutation(),_useUpdateDeliveryMut2=_slicedToArray(_useUpdateDeliveryMut,1),updateMaterial=_useUpdateDeliveryMut2[0];var onSaveContact=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var contact;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:contact={name:name,from:from,to:to,radio:radio,time:time,comment:comment};if(!data.find(function(item){return item.name.toLowerCase()===contact.name.toLowerCase();})){_context.next=3;break;}return _context.abrupt(\"return\",alert(\"Contact \".concat(name,\" already exists\")));case 3:_context.next=5;return addContact({id:nanoid(),name:name,from:from,to:to,radio:radio,time:time,comment:comment});case 5:case\"end\":return _context.stop();}}},_callee);}));return function onSaveContact(){return _ref2.apply(this,arguments);};}();var onUpdateMaterial=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fields){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return updateMaterial(_objectSpread({id:formData.id},fields));case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function onUpdateMaterial(_x){return _ref3.apply(this,arguments);};}();var handleSubmit=function handleSubmit(e){e.preventDefault();if(isChange){// изменерие контакta\nonUpdateMaterial();onClose();}else{onSaveContact();}setName(\"\");setFrom(\"\");setTo(\"\");setTime(\"\");};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:s.form,children:/*#__PURE__*/_jsxs(\"div\",{className:s.div,children:[/*#__PURE__*/_jsx(\"label\",{className:s.label,children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{className:s.input,id:nanoid(),type:\"text\",value:name,onChange:function onChange(e){return setName(e.target.value);},name:\"name\",pattern:\"^[a-zA-Z\\u0430-\\u044F\\u0410-\\u042F]+(([' -][a-zA-Z\\u0430-\\u044F\\u0410-\\u042F ])?[a-zA-Z\\u0430-\\u044F\\u0410-\\u042F]*)*$\",title:\"\\u0418\\u043C\\u044F \\u043C\\u043E\\u0436\\u0435\\u0442 \\u0441\\u043E\\u0441\\u0442\\u043E\\u044F\\u0442\\u044C \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u0438\\u0437 \\u0431\\u0443\\u043A\\u0432, \\u0430\\u043F\\u043E\\u0441\\u0442\\u0440\\u043E\\u0444\\u0430, \\u0442\\u0438\\u0440\\u0435 \\u0438 \\u043F\\u0440\\u043E\\u0431\\u0435\\u043B\\u043E\\u0432. \\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \\u0438 \\u0442. \\u043F.\",required:true,placeholder:\"Ivan Dudka\"}),/*#__PURE__*/_jsx(\"label\",{className:s.label,children:\"From\"}),/*#__PURE__*/_jsx(\"input\",{className:s.input,type:\"text\",value:from,onChange:function onChange(e){return setFrom(e.target.value);},name:\"name\",pattern:\"^[a-zA-Z\\u0430-\\u044F\\u0410-\\u042F]+(([' -][a-zA-Z\\u0430-\\u044F\\u0410-\\u042F ])?[a-zA-Z\\u0430-\\u044F\\u0410-\\u042F]*)*$\",title:\"\\u0418\\u043C\\u044F \\u043C\\u043E\\u0436\\u0435\\u0442 \\u0441\\u043E\\u0441\\u0442\\u043E\\u044F\\u0442\\u044C \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u0438\\u0437 \\u0431\\u0443\\u043A\\u0432, \\u0430\\u043F\\u043E\\u0441\\u0442\\u0440\\u043E\\u0444\\u0430, \\u0442\\u0438\\u0440\\u0435 \\u0438 \\u043F\\u0440\\u043E\\u0431\\u0435\\u043B\\u043E\\u0432. \\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \\u0438 \\u0442. \\u043F.\",required:true,placeholder:\"City:\"}),/*#__PURE__*/_jsx(\"label\",{className:s.label,children:\"To\"}),/*#__PURE__*/_jsx(\"input\",{className:s.input,type:\"text\",value:to,onChange:function onChange(e){return setTo(e.target.value);},name:\"name\",pattern:\"^[a-zA-Z\\u0430-\\u044F\\u0410-\\u042F]+(([' -][a-zA-Z\\u0430-\\u044F\\u0410-\\u042F ])?[a-zA-Z\\u0430-\\u044F\\u0410-\\u042F]*)*$\",title:\"\\u0418\\u043C\\u044F \\u043C\\u043E\\u0436\\u0435\\u0442 \\u0441\\u043E\\u0441\\u0442\\u043E\\u044F\\u0442\\u044C \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u0438\\u0437 \\u0431\\u0443\\u043A\\u0432, \\u0430\\u043F\\u043E\\u0441\\u0442\\u0440\\u043E\\u0444\\u0430, \\u0442\\u0438\\u0440\\u0435 \\u0438 \\u043F\\u0440\\u043E\\u0431\\u0435\\u043B\\u043E\\u0432. \\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \\u0438 \\u0442. \\u043F.\",required:true,placeholder:\"City:\"}),/*#__PURE__*/_jsx(\"label\",{className:s.label,children:\"Choose type of your item:\"}),/*#__PURE__*/_jsxs(\"div\",{className:s.checks,children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"test1\",name:\"radio-group\",checked:radio===\"Gadgets\",onChange:function onChange(){return setRadio(\"Gadgets\");}}),/*#__PURE__*/_jsx(\"label\",{for:\"test1\",children:\"Gadgets\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"test2\",name:\"radio-group\",checked:radio===\"Drinks\",onChange:function onChange(){return setRadio(\"Drinks\");}}),/*#__PURE__*/_jsx(\"label\",{for:\"test2\",children:\"Drinks\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"test3\",name:\"radio-group\",checked:radio===\"Clothes\",onChange:function onChange(){return setRadio(\"Clothes\");}}),/*#__PURE__*/_jsx(\"label\",{for:\"test3\",children:\"Clothes\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"test3\",name:\"radio-group\",checked:radio===\"Apple\",onChange:function onChange(){return setRadio(\"Apple\");}}),/*#__PURE__*/_jsx(\"label\",{for:\"test3\",children:\"Other\"})]})]}),/*#__PURE__*/_jsx(\"label\",{className:s.label,children:\"Date of dispatch\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",name:\"Startdate\",value:time,onChange:function onChange(e){return setTime(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{for:\"comment\",className:s.label,children:\"Comments:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"comment\",name:\"comment\",rows:\"4\",cols:\"50\",value:comment,onChange:function onChange(e){return setComment(e.target.value);},placeholder:\"Write some details\"}),isChange?/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:s.buttonUpdate,children:\"Update\"}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:s.button,children:\"Add\"})]})})});}DeliveryForm.defaultProps={formData:{name:\"\",from:\"\",to:\"\",radio:\"\",time:\"\",comment:\"\"}};","map":{"version":3,"sources":["/Users/staschekhov/Desktop/Probnoe/test-delivery-products/src/components/DeliveryForm.jsx"],"names":["React","useState","s","nanoid","useDispatch","useAddDeliveryMutation","useGetDeliveryQuery","useUpdateDeliveryMutation","useGetDeliveryByIdQuery","DeliveryForm","formData","isChange","onClose","name","setName","from","setFrom","to","setTo","radio","setRadio","time","setTime","comment","setComment","data","error","isLoading","refetch","addContact","result","id","updateMaterial","onSaveContact","contact","find","item","toLowerCase","alert","onUpdateMaterial","fields","console","log","handleSubmit","e","preventDefault","form","div","label","input","target","value","checks","buttonUpdate","button","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport s from \"./Delivery.module.css\";\nimport { nanoid } from \"@reduxjs/toolkit\";\nimport { useDispatch } from \"react-redux\";\nimport {\n useAddDeliveryMutation,\n useGetDeliveryQuery,\n useUpdateDeliveryMutation,\n useGetDeliveryByIdQuery,\n} from \"redux/deliveryApi\";\n\nexport default function DeliveryForm({ formData, isChange, onClose }) {\n //  const dispatch = useDispatch();\n const [name, setName] = useState(formData.name);\n\n const [from, setFrom] = useState(formData.from);\n const [to, setTo] = useState(formData.to);\n const [radio, setRadio] = useState(formData.radio);\n const [time, setTime] = useState(formData.time);\n const [comment, setComment] = useState(formData.comment);\n //  console.log(formData.id);\n\n const { data = [], error, isLoading, refetch } = useGetDeliveryQuery();\n const [addContact, result] = useAddDeliveryMutation(data);\n const {} = useGetDeliveryByIdQuery(formData.id);\n const [updateMaterial] = useUpdateDeliveryMutation();\n\n const onSaveContact = async () => {\n  const contact = {\n   name,\n   from,\n   to,\n   radio,\n   time,\n   comment,\n  };\n\n  if (\n   data.find((item) => item.name.toLowerCase() === contact.name.toLowerCase())\n  ) {\n   return alert(`Contact ${name} already exists`);\n  }\n  await addContact({ id: nanoid(), name, from, to, radio, time, comment });\n };\n\n const onUpdateMaterial = async (fields) => {\n  try {\n   await updateMaterial({ id: formData.id, ...fields });\n  } catch (error) {\n   console.log(error);\n  }\n };\n\n const handleSubmit = (e) => {\n  e.preventDefault();\n  if (isChange) {\n   // изменерие контакta\n   onUpdateMaterial();\n   onClose();\n  } else {\n   onSaveContact();\n  }\n  setName(\"\");\n  setFrom(\"\");\n  setTo(\"\");\n  setTime(\"\");\n };\n\n return (\n  <>\n   <form onSubmit={handleSubmit} className={s.form}>\n    <div className={s.div}>\n     <label className={s.label}>Name</label>\n     <input\n      className={s.input}\n      id={nanoid()}\n      type=\"text\"\n      value={name}\n      onChange={(e) => setName(e.target.value)}\n      name=\"name\"\n      pattern=\"^[a-zA-Zа-яА-Я]+(([' -][a-zA-Zа-яА-Я ])?[a-zA-Zа-яА-Я]*)*$\"\n      title=\"Имя может состоять только из букв, апострофа, тире и пробелов. Например Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan и т. п.\"\n      required\n      placeholder=\"Ivan Dudka\"\n     />\n     <label className={s.label}>From</label>\n     <input\n      className={s.input}\n      type=\"text\"\n      value={from}\n      onChange={(e) => setFrom(e.target.value)}\n      name=\"name\"\n      pattern=\"^[a-zA-Zа-яА-Я]+(([' -][a-zA-Zа-яА-Я ])?[a-zA-Zа-яА-Я]*)*$\"\n      title=\"Имя может состоять только из букв, апострофа, тире и пробелов. Например Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan и т. п.\"\n      required\n      placeholder=\"City:\"\n     />\n     <label className={s.label}>To</label>\n     <input\n      className={s.input}\n      type=\"text\"\n      value={to}\n      onChange={(e) => setTo(e.target.value)}\n      name=\"name\"\n      pattern=\"^[a-zA-Zа-яА-Я]+(([' -][a-zA-Zа-яА-Я ])?[a-zA-Zа-яА-Я]*)*$\"\n      title=\"Имя может состоять только из букв, апострофа, тире и пробелов. Например Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan и т. п.\"\n      required\n      placeholder=\"City:\"\n     />\n     <label className={s.label}>Choose type of your item:</label>\n     <div className={s.checks}>\n      <p>\n       <input\n        type=\"radio\"\n        id=\"test1\"\n        name=\"radio-group\"\n        checked={radio === \"Gadgets\"}\n        onChange={() => setRadio(\"Gadgets\")}\n       />\n       <label for=\"test1\">Gadgets</label>\n      </p>\n      <p>\n       <input\n        type=\"radio\"\n        id=\"test2\"\n        name=\"radio-group\"\n        checked={radio === \"Drinks\"}\n        onChange={() => setRadio(\"Drinks\")}\n       />\n       <label for=\"test2\">Drinks</label>\n      </p>\n      <p>\n       <input\n        type=\"radio\"\n        id=\"test3\"\n        name=\"radio-group\"\n        checked={radio === \"Clothes\"}\n        onChange={() => setRadio(\"Clothes\")}\n       />\n       <label for=\"test3\">Clothes</label>\n      </p>\n      <p>\n       <input\n        type=\"radio\"\n        id=\"test3\"\n        name=\"radio-group\"\n        checked={radio === \"Apple\"}\n        onChange={() => setRadio(\"Apple\")}\n       />\n       <label for=\"test3\">Other</label>\n      </p>\n     </div>\n\n     <label className={s.label}>Date of dispatch</label>\n     <input\n      type=\"datetime-local\"\n      name=\"Startdate\"\n      value={time}\n      onChange={(e) => setTime(e.target.value)}\n     />\n\n     <label for=\"comment\" className={s.label}>\n      Comments:\n     </label>\n     <textarea\n      id=\"comment\"\n      name=\"comment\"\n      rows=\"4\"\n      cols=\"50\"\n      value={comment}\n      onChange={(e) => setComment(e.target.value)}\n      placeholder=\"Write some details\"\n     ></textarea>\n     {isChange ? (\n      <button type=\"submit\" className={s.buttonUpdate}>\n       Update\n      </button>\n     ) : (\n      <button type=\"submit\" className={s.button}>\n       Add\n      </button>\n     )}\n    </div>\n   </form>\n  </>\n );\n}\n\nDeliveryForm.defaultProps = {\n formData: {\n  name: \"\",\n  from: \"\",\n  to: \"\",\n  radio: \"\",\n  time: \"\",\n  comment: \"\",\n },\n};\n"]},"metadata":{},"sourceType":"module"}